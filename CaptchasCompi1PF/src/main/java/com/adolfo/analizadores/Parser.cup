//codigo java
package com.adolfo.analizadores;
/*importar librerias o archivos utilizados*/
import java_cup.runtime.*;
import java.util.List;
import java.util.ArrayList;
import com.adolfo.analizadores.Token;
import com.adolfo.analizadores.datos.LexemeId;
import com.adolfo.analizadores.datos.EtiquetaId;
import com.adolfo.analizadores.datos.TablaSimbolo;

 parser code {:
    //declaracion de variables
    private int filaErr = 0, columnErr = 0;
    private String datErr = "", lexErr = "", idCaptcha = "", namehtml = "", captchaCreado = "";
    private List<String> errorSintactico;
    private List<String> errorSemantico;
    private List<String> listIdEtiqueta;
    private List<LexemeId> ListTablaSimbol;
    private EtiquetaId etiquetaId;
    private TablaSimbolo tablaSimbolo;
    private int parId = 0, parName = 0;
    int asd;

    public Parser(Lexico lex) {
        super(lex);

        this.errorSintactico = new ArrayList();
        this.errorSemantico = new ArrayList();
        this.listIdEtiqueta = new ArrayList();
        this.ListTablaSimbol = new ArrayList();
        this.etiquetaId = new EtiquetaId();
        this.tablaSimbolo = new TablaSimbolo();
        asd = lex.dat();
    }


//recuperacion de errroes
    public void report_error(String message, Object info) {
		System.out.println("reporterror");
	}
	public void report_fatal_error(String message, Object info) {
		System.out.println("reportfatal");
	}
	public void report_fatal_error(Symbol cur) {
		System.out.println("unrecovered_syntax_error");
	}
    
    @Override
    public void syntax_error(Symbol st) {
       Token token = (Token) st.value;
        if(filaErr == 0){
            filaErr = token.getLine();
            columnErr = token.getColumna();
            datErr = token.getLexema();
            lexErr = token.getLexema();
        } else {
            if(filaErr == token.getLine()){
                datErr += " " + token.getLexema();
            } else {
                System.out.println("err: " + lexErr + " este no pertenece a la estructura - linea: " + filaErr + ", columna: " + columnErr + " y verificar lexemas: " + datErr);
                errorSintactico.add(String.format("Error Sintactico lexema: %s  linea: %d  columna: %d. no se esperaba ese token.", token.getLexema(), token.getLine(), token.getColumna()));
                filaErr = token.getLine();
                columnErr = token.getColumna();
                datErr = token.getLexema();
                lexErr = token.getLexema();
            }

        }
        //report_error("Error Sintactico con el  Token:"+ token.getLexema()+" este no pertenece a la estructura - linea: "+token.getLine()+" - columna: "+token.getColumna() + "\n",null);

    // System.out.println("err: " + token.getLexema() + " este no pertenece a la estructura - linea: " + token.getLine() + ", columna: " + token.getColumna());
       // errorSintactico.add(String.format("Error Sintactico lexema: %s  linea: %d  columna: %d. no se esperaba ese token.", token.getLexema(), token.getLine(), token.getColumna()));
    }

    protected int error_sync_size() {
		return 1;
	}
    public List<String> getErrorSintactico(){
	        return errorSintactico;
	    }

    public List<LexemeId> getListTablaSimbol(){
	        return ListTablaSimbol;
    }

 :}

 /*simbolos terminales*/
 terminal Token HTML ,HEAD, TITLE, LINK, BODY, SPAM, INPUT, TEXTAREA, 
            SELECTED, OPTION, DIV, IMG, BR, BUTTON, H1, P, SCRIPT,
            REFERENCIA, BACKGROUND, COLOR, FONTSZ, FONTFY, ALINGN,
            TYPE, IDCM, NAME, COLUMNA, FILA, CLASE, SRC, WIDTH,	HEIGHT,
            ALT, ONCLICK, ENTERO, DECIMAL, BOOLEANO, CHAR, STRING, GLOBAL,
            IGUAL, MEQ, MAQ, OR, AND, NOT, SUMA, RESTA, PRODUCTO, DIVISION,
            CORIN, COROUT, PARIN, PAROUT, COMA, PUNTOCOMA, LLAVEIN, LLAVEOUT,
            DOSP, LOAD, ASCF, DESCF, LETPF, LETIMF, REVERSEF, CARALEF, NUMALEF,
            ALERTF, EXIT, GETID, INSERT, INIT, END, IF, ELSE, REPEAT, HUNTIL,
            THEN, WHILE, THENWHILE, COMILLA, APOSTROFO, PROCESOS, BOOLEANOS, ID,
            NUMENTERO, NUMDECIMAL, CARACTER, HEXADECIMAL, CADENA; 


 /*simbolos no terminales*/
non terminal exp_ini, par_html, exp_head, exp_name, par_head, exp_contenido, exp_cadenatext, 
            par_link, exp_links, parm_shisp, exp_opciones, parm_input, parm_image,
            par_areatext, par_color, par_fontsize, par_heigtwith, par_button, par_body,
            exp_proceso, contenido_div, par_div, exp_script, exp_funciones,
            instrucciones, exp_variables, texto, mensaje_texto, instrucciones_if, condiciones,
            condiciones_repeat, limit_repeat, instrucciones_intro, par_insert, par_insert1,
            texto_etiqueta, exp_entero, exp_decimal, exp_char, exp_string, exp_boolean, dato_entero,
            exp_opeinteger, dato_decimal, exp_oper_decimal, texto_insert, dat_char, 
            dato_string, exp_oper_string, exp_funciones_especial, par_function_esp, dat_boolean,
            exp_oper_bool, numeros, expr_numerica, signo_condicion, exp_condicion, oper_cond,
            exp_conds, exp_dir, exp_oper_id;


/* Producciones siendo A el inicial*/
start with exp_ini;

 exp_ini ::= MEQ HTML par_html exp_head  {: captchaCreado += "<HTML  ";
                                  System.out.println("TE AMO CARMEN QUIERO VERTE OTRA VEZ");   System.out.println("VIDALIA " + captchaCreado);       :}
    | error exp_head    {:System.out.println("error html en inicio");:}
    ;

par_html ::= CORIN IDCM IGUAL COMILLA ID:i COMILLA COROUT par_html:s  {: idCaptcha = i.getLexema(); parId++; 
                                                        if(etiquetaId.existeId(idCaptcha, listIdEtiqueta)){ System.out.println("si existe");
                                                        } else {System.out.println("no existe"); listIdEtiqueta.add(idCaptcha);}
                                                        if(parId > 1){System.out.println("error semantico, aparece 2 veces el parametro id en la etiqueta htm");}  
                                                              :} 
    | CORIN NAME IGUAL COMILLA:c exp_name:i COROUT par_html     {: namehtml = c.getLexema() + i.toString(); parName++; System.out.println("CVXG  " + i.toString()+ " te amo Vidalia "+asd);
                                                        if(parName > 1){System.out.println("error semantico, aparece 2 veces el parametro name en la etiqueta htm");}  
                                                              :} 
    | MAQ:a        {:System.out.println("sintactico parametros html" + a.getLexema() + " " + idCaptcha + " as " + namehtml);:}
    ;

exp_name ::= CADENA:tp exp_name:n        {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | ID:tp exp_name:n                   {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | NUMENTERO:tp exp_name:n            {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | NUMDECIMAL:tp exp_name:n           {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | COMILLA:tp                         {:RESULT = tp.getLexema(); :}
    ;

exp_head ::= MEQ HEAD MAQ par_head MEQ BODY par_body  exp_contenido   {:System.out.println("sintactico head");:}
    | exp_script exp_head
    | MEQ BODY par_body  exp_contenido  
    ;


par_head ::= MEQ TITLE MAQ exp_cadenatext  TITLE MAQ par_head
    | MEQ LINK par_link MEQ DIVISION LINK MAQ par_head
    | MEQ DIVISION HEAD MAQ
    | exp_script par_head
    ;

par_body ::= CORIN BACKGROUND IGUAL COMILLA exp_links COROUT par_link
    | MAQ
    ;


par_link ::= CORIN REFERENCIA IGUAL COMILLA exp_links COROUT par_link
    | MAQ
    ;

exp_links ::= ID exp_links
    | DOSP exp_links
    | DIVISION exp_links
    | CADENA exp_links
    | IGUAL exp_links
    | NUMENTERO exp_links
    | AND exp_links
    | NUMDECIMAL exp_links
    | SUMA exp_links
    | PRODUCTO exp_links
    | RESTA exp_links
    | PARIN exp_links
    | PAROUT exp_links
    | COMA exp_links
    | HEXADECIMAL exp_links
    | COMILLA
    ;

exp_contenido ::= MEQ SPAM parm_shisp exp_cadenatext  SPAM MAQ exp_contenido   {:System.out.println("contenido html");:}
    | MEQ SELECTED parm_shisp exp_opciones  SELECTED MAQ exp_contenido
    | MEQ H1 parm_shisp exp_cadenatext  H1 MAQ exp_contenido
    | MEQ P parm_shisp exp_cadenatext  P MAQ exp_contenido
    | MEQ BR MAQ exp_contenido
    | MEQ INPUT parm_input exp_cadenatext  INPUT MAQ exp_contenido
    | MEQ IMG parm_image MEQ DIVISION IMG MAQ exp_contenido
    | MEQ TEXTAREA par_areatext TEXTAREA MAQ exp_contenido
    | MEQ DIV par_div contenido_div DIV MAQ exp_contenido //falta contenido_div y par div
    | MEQ BUTTON par_button  exp_cadenatext BUTTON MAQ exp_contenido //falta par_button
    | exp_script exp_contenido
    | MEQ DIVISION BODY MAQ MEQ DIVISION HTML MAQ  {: captchaCreado += "</body> \n</html>"; System.out.println("err: " + lexErr + " este no pertenece a la estructura - linea: " + filaErr + ", columna: " + columnErr + " y verificar lexemas: " + datErr);
                //errorSintactico.add(String.format("Error Sintactico lexema: %s  linea: %d  columna: %d. no se esperaba ese token.", token.getLexema(), token.getLine(), token.getColumna()));:}
    | MEQ DIVISION HTML MAQ   {: captchaCreado += "</html>"; System.out.println("err: " + lexErr + " este no pertenece a la estructura - linea: " + filaErr + ", columna: " + columnErr + " y verificar lexemas: " + datErr);
                //errorSintactico.add(String.format("Error Sintactico lexema: %s  linea: %d  columna: %d. no se esperaba ese token.", token.getLexema(), token.getLine(), token.getColumna()));:}
    | error exp_contenido            {:System.out.println("error html");:}
    ;

contenido_div ::= MEQ SPAM parm_shisp exp_cadenatext  SPAM MAQ contenido_div
    | MEQ SELECTED parm_shisp exp_opciones  SELECTED MAQ contenido_div
    | MEQ H1 parm_shisp exp_cadenatext  H1 MAQ contenido_div
    | MEQ P parm_shisp exp_cadenatext  P MAQ contenido_div
    | MEQ BR MAQ contenido_div
    | MEQ INPUT parm_input exp_cadenatext  INPUT MAQ contenido_div
    | MEQ IMG parm_image MEQ DIVISION IMG MAQ contenido_div
    | MEQ TEXTAREA par_areatext TEXTAREA MAQ contenido_div
    | MEQ BUTTON par_button  exp_cadenatext  BUTTON MAQ contenido_div //falta par_button
    | exp_script contenido_div
    | MEQ DIVISION DIV MAQ 
    ;

par_div ::=  CORIN IDCM IGUAL COMILLA ID COMILLA COROUT par_div //fuera de style
    | CORIN ALINGN IGUAL COMILLA ID COMILLA COROUT par_div
    | CORIN COLOR IGUAL COMILLA par_color COMILLA COROUT par_div
    | CORIN FONTFY IGUAL COMILLA ID COMILLA COROUT par_div
    | CORIN FONTSZ IGUAL COMILLA par_fontsize COMILLA COROUT par_div
    | CORIN BACKGROUND IGUAL COMILLA exp_links COROUT par_div
    | CORIN CLASE IGUAL COMILLA ID COROUT par_div
    | MAQ
    ;

par_button ::=  CORIN IDCM IGUAL COMILLA ID COMILLA COROUT par_button //fuera de style
    | CORIN ALINGN IGUAL COMILLA ID COMILLA COROUT par_button
    | CORIN COLOR IGUAL COMILLA par_color COMILLA COROUT par_button
    | CORIN FONTFY IGUAL COMILLA ID COMILLA COROUT par_button
    | CORIN FONTSZ IGUAL COMILLA par_fontsize COMILLA COROUT par_button
    | CORIN BACKGROUND IGUAL COMILLA exp_links COROUT par_button
    | CORIN ONCLICK IGUAL COMILLA exp_proceso COROUT par_button
    | MAQ 
    ;



par_areatext ::=  CORIN IDCM IGUAL COMILLA ID COMILLA COROUT par_areatext //fuera de style
    | CORIN COLUMNA IGUAL COMILLA NUMENTERO COMILLA COROUT par_areatext
    | CORIN FILA IGUAL COMILLA NUMENTERO COMILLA COROUT par_areatext
    | CORIN ALINGN IGUAL COMILLA ID COMILLA COROUT par_areatext
    | CORIN FONTFY IGUAL COMILLA ID COMILLA COROUT par_areatext
    | CORIN FONTSZ IGUAL COMILLA par_fontsize COMILLA COROUT par_areatext
    | MAQ DIVISION
    ;

parm_shisp ::=  CORIN IDCM IGUAL COMILLA ID COMILLA COROUT parm_shisp //fuera de style
    | CORIN COLOR IGUAL COMILLA par_color COMILLA COROUT parm_shisp
    | CORIN ALINGN IGUAL COMILLA ID COMILLA COROUT parm_shisp
    | CORIN FONTFY IGUAL COMILLA ID COMILLA COROUT parm_shisp
    | CORIN FONTSZ IGUAL COMILLA par_fontsize COMILLA COROUT parm_shisp
    | MAQ
    ;

parm_input ::=  CORIN IDCM IGUAL COMILLA ID COMILLA COROUT parm_input //fuera de style
    | CORIN TYPE IGUAL COMILLA ID COMILLA COROUT parm_input
    | CORIN COLOR IGUAL COMILLA par_color COMILLA COROUT parm_input
    | CORIN ALINGN IGUAL COMILLA ID COMILLA COROUT parm_input
    | CORIN FONTFY IGUAL COMILLA ID COMILLA COROUT parm_input
    | CORIN FONTSZ IGUAL COMILLA par_fontsize COMILLA COROUT parm_input
    | MAQ
    ;

parm_image ::=  CORIN IDCM IGUAL COMILLA ID COMILLA COROUT parm_image //fuera de style
    | CORIN SRC IGUAL COMILLA exp_links  COROUT parm_image
    | CORIN ALT IGUAL COMILLA ID COMILLA COROUT parm_image
    | CORIN WIDTH IGUAL COMILLA par_heigtwith COMILLA COROUT parm_image
    | CORIN HEIGHT IGUAL COMILLA par_heigtwith COMILLA COROUT parm_image
    | MAQ
    ;

exp_proceso ::= PROCESOS PARIN PAROUT COMILLA
    | LOAD PARIN PAROUT COMILLA 
    ;

exp_cadenatext ::= CADENA exp_cadenatext
    | ID exp_cadenatext
    | NUMENTERO exp_cadenatext
    | NUMDECIMAL exp_cadenatext
    | SUMA exp_cadenatext
    | RESTA exp_cadenatext
    | PRODUCTO exp_cadenatext
    | DIVISION exp_cadenatext
    | DOSP exp_cadenatext
    | COMA exp_cadenatext
    | IGUAL exp_cadenatext
    | PARIN exp_cadenatext
    | PAROUT exp_cadenatext
    | MEQ DIVISION
    ;

exp_opciones ::= MEQ OPTION MAQ exp_cadenatext  OPTION MAQ exp_opciones
    | MEQ DIVISION
    ;

par_color ::= ID
    | HEXADECIMAL
    ;

par_fontsize ::= NUMENTERO ID
    | NUMDECIMAL ID
    ;

par_heigtwith ::= NUMENTERO ID
    | NUMDECIMAL ID
    | NUMENTERO CADENA
    | NUMDECIMAL CADENA
    ;

exp_script ::= MEQ SCRIPT MAQ exp_funciones
    ;

exp_funciones ::= LOAD PARIN PAROUT CORIN instrucciones exp_funciones
    | PROCESOS PARIN PAROUT CORIN instrucciones exp_funciones
    | MEQ DIVISION SCRIPT MAQ
    ;

instrucciones ::= exp_variables instrucciones //ya 
    | ALERTF PARIN texto PAROUT PUNTOCOMA instrucciones //ya
    | EXIT PARIN PAROUT PUNTOCOMA instrucciones //ya
    | IF PARIN condiciones  THEN INIT LLAVEIN DOSP instrucciones_intro instrucciones_if instrucciones
    | REPEAT PARIN condiciones_repeat PAROUT HUNTIL PARIN limit_repeat PAROUT INIT LLAVEIN DOSP instrucciones_intro instrucciones
    | WHILE PARIN condiciones  THENWHILE INIT LLAVEIN DOSP instrucciones_intro instrucciones
    | INSERT PARIN par_insert PUNTOCOMA instrucciones //ya
    | COROUT
    | error instrucciones
    ;

instrucciones_intro ::= exp_variables instrucciones_intro //ya 
    | ALERTF PARIN texto PAROUT PUNTOCOMA instrucciones_intro //ya
    | EXIT PARIN PAROUT PUNTOCOMA instrucciones_intro //ya
    | IF PARIN condiciones  THEN INIT LLAVEIN DOSP instrucciones_intro instrucciones_if instrucciones_intro
    | REPEAT PARIN condiciones_repeat PAROUT HUNTIL PARIN limit_repeat PAROUT INIT LLAVEIN DOSP instrucciones_intro instrucciones_intro
    | WHILE PARIN condiciones  THENWHILE INIT LLAVEIN DOSP instrucciones_intro instrucciones_intro
    | INSERT PARIN par_insert PUNTOCOMA instrucciones_intro //ya
    | DOSP LLAVEOUT END
    | error instrucciones_intro
    ;

condiciones ::= NOT condiciones 
    | exp_condicion exp_conds 
    ;

exp_conds ::=  signo_condicion exp_condicion oper_cond
    |  oper_cond 
    ;

exp_condicion ::= BOOLEANOS
    | limit_repeat
    | COMILLA ID COMILLA
    | COMILLA CADENA COMILLA
    ;

oper_cond ::= AND AND condiciones
    | OR OR condiciones
    | PAROUT
    ;

signo_condicion ::= IGUAL IGUAL
    | NOT IGUAL
    | MEQ
    | MEQ IGUAL
    | MAQ 
    | MAQ IGUAL
    ;

instrucciones_if ::= ELSE IF PARIN condiciones  THEN INIT LLAVEIN DOSP instrucciones_intro instrucciones_if
    | ELSE INIT LLAVEIN DOSP instrucciones_intro
    | /*LAMBDA*/
    ;

limit_repeat ::= numeros SUMA limit_repeat
    | numeros RESTA limit_repeat
    | numeros PRODUCTO limit_repeat
    | numeros DIVISION limit_repeat
    | PARIN limit_repeat PAROUT expr_numerica
    | numeros
    ;

expr_numerica ::= SUMA limit_repeat
    | RESTA limit_repeat
    | PRODUCTO limit_repeat
    | DIVISION limit_repeat
    | /*LAMBDA*/
    ;

condiciones_repeat ::= ID IGUAL numeros
    | ENTERO ID IGUAL numeros
    ;

numeros ::= NUMENTERO 
    | NUMDECIMAL 
    | ID
    ;

exp_variables ::= ENTERO ID exp_entero
    | DECIMAL ID exp_decimal
    | CHAR ID exp_char
    | STRING ID exp_string
    | BOOLEANO ID exp_boolean
    | ENTERO GLOBAL ID exp_entero
    | DECIMAL GLOBAL ID exp_decimal
    | CHAR GLOBAL ID exp_char
    | STRING GLOBAL ID exp_string
    | BOOLEANO GLOBAL ID exp_boolean
    | ID exp_dir
    ;

exp_dir ::= IGUAL dato_string exp_oper_id
    ;

exp_oper_id ::= SUMA dato_string exp_oper_id
    | RESTA dato_string exp_oper_id
    | DIVISION dato_string exp_oper_id
    | PRODUCTO dato_string exp_oper_id
    | COMA ID exp_dir
    | PUNTOCOMA
    ;

exp_boolean ::= IGUAL dat_boolean exp_oper_bool
    | COMA ID exp_boolean
    | PUNTOCOMA
    ;

dat_boolean ::= BOOLEANOS 
    | ID
    ;

exp_oper_bool ::= OR dat_boolean exp_oper_bool
    | OR OR dat_boolean exp_oper_bool
    | AND dat_boolean exp_oper_bool
    | AND AND dat_boolean exp_oper_bool
    | COMA ID exp_boolean
    | PUNTOCOMA
    ;

exp_string ::= IGUAL dato_string exp_oper_string
    | COMA ID exp_string
    | IGUAL GETID PARIN APOSTROFO ID APOSTROFO PAROUT exp_oper_string
    | IGUAL exp_funciones_especial exp_oper_string
    | PUNTOCOMA
    ;

exp_funciones_especial ::= ASCF PARIN par_function_esp PAROUT
    | DESCF PARIN par_function_esp PAROUT
    | LETPF PARIN par_function_esp PAROUT
    | LETIMF PARIN par_function_esp PAROUT
    | REVERSEF PARIN par_function_esp PAROUT
    ;

par_function_esp ::= ID
    | COMILLA exp_links 
    ;

exp_oper_string ::= SUMA dato_string exp_oper_string
    | COMA ID exp_string
    | PUNTOCOMA
    ;


dato_string ::= NUMENTERO
    | CARACTER 
    | NUMDECIMAL
    | COMILLA exp_links 
    | ID:tp                     {:  if(tablaSimbolo.existeId(tp.getLexema(), ListTablaSimbol)) { System.out.println("si existe id");
                              } else {
                                  errorSemantico.add(String.format("Error semantico con id: %s  linea: %d  columna: %d. no existe este id.", tp.getLexema(), tp.getLine(), tp.getColumna()));
                              }  RESULT = tp.getLexema(); :}
    ;

exp_char ::= IGUAL CARACTER dat_char
    | COMA ID exp_char
    | IGUAL CARALEF PARIN PAROUT dat_char
    | PUNTOCOMA
    ;

dat_char ::= COMA ID exp_char
    | PUNTOCOMA
    ;

exp_entero ::= IGUAL dato_entero  exp_opeinteger
    | COMA ID exp_entero
    | IGUAL NUMALEF PARIN PAROUT exp_opeinteger
    | PUNTOCOMA
    ;

exp_opeinteger ::= SUMA dato_entero exp_opeinteger
    | RESTA dato_entero exp_opeinteger
    | DIVISION dato_entero exp_opeinteger
    | PRODUCTO dato_entero exp_opeinteger
    | COMA ID exp_entero
    | PUNTOCOMA
    ;

dato_entero ::= NUMENTERO:tp
    | BOOLEANOS:tp                 {:  if(tp.getLexema().equals("true")) { RESULT = "1";
                                       } else if(tp.getLexema().equals("false")) { RESULT = "0"; } else {
                                         errorSemantico.add(String.format("Error semantico con id: %s  linea: %d  columna: %d. no existe este id.", tp.getLexema(), tp.getLine(), tp.getColumna()));
                                         RESULT = tp.getLexema();
                                        }  :}
    | CARACTER:tp                   {: char as = tp.getLexema().charAt(1);int asciiValue = as;  RESULT = asciiValue; :}
    | ID:tp                          {:  if(tablaSimbolo.existeId(tp.getLexema(), ListTablaSimbol)) { System.out.println("si existe id");
                              } else {
                                  errorSemantico.add(String.format("Error semantico con id: %s  linea: %d  columna: %d. no existe este id.", tp.getLexema(), tp.getLine(), tp.getColumna()));
                              }  RESULT = tp.getLexema(); :}
    ;

exp_decimal ::= IGUAL dato_decimal  exp_oper_decimal
    | COMA ID exp_decimal
    | IGUAL NUMALEF PARIN PAROUT exp_oper_decimal
    | PUNTOCOMA
    ;

exp_oper_decimal ::= SUMA dato_decimal exp_oper_decimal
    | RESTA dato_decimal exp_oper_decimal
    | DIVISION dato_decimal exp_oper_decimal
    | PRODUCTO dato_decimal exp_oper_decimal
    | COMA ID exp_decimal
    | PUNTOCOMA
    ;

dato_decimal ::= NUMENTERO:tp       {:RESULT = tp.getLexema(); :}
    | NUMDECIMAL:tp                 {:RESULT = tp.getLexema(); :}
    | BOOLEANOS:tp                 {:  if(tp.getLexema().equals("true")) { RESULT = 1;
                                       } else if(tp.getLexema().equals("false")) { RESULT = 0; } else {
                                         errorSemantico.add(String.format("Error semantico con id: %s  linea: %d  columna: %d. no existe este id.", tp.getLexema(), tp.getLine(), tp.getColumna()));
                                         RESULT = tp.getLexema();
                                        }  :}
    | CARACTER:tp                   {: char as = tp.getLexema().charAt(1);int asciiValue = as;  RESULT = asciiValue; :} 
    | ID:tp                          {:  if(tablaSimbolo.existeId(tp.getLexema(), ListTablaSimbol)) { System.out.println("si existe id");
                              } else {
                                  errorSemantico.add(String.format("Error semantico con id: %s  linea: %d  columna: %d. no existe este id.", tp.getLexema(), tp.getLine(), tp.getColumna()));
                              }  RESULT = tp.getLexema(); :}
    ;

par_insert ::= ID:tp par_insert1:n       {:  if(tablaSimbolo.existeId(tp.getLexema(), ListTablaSimbol)) { System.out.println("si existe id");
                              } else {
                                  errorSemantico.add(String.format("Error semantico con id: %s  linea: %d  columna: %d. no existe este id.", tp.getLexema(), tp.getLine(), tp.getColumna()));
                              }  RESULT =  tp.getLexema() + n.toString(); :}
    | APOSTROFO:tp texto_insert:e  par_insert1:n   {:RESULT = " + " +  tp.getLexema()+" " + e.toString() + n.toString(); :}
    ;

par_insert1 ::= COMA ID:tp par_insert1:n     {:  if(tablaSimbolo.existeId(tp.getLexema(), ListTablaSimbol)) { System.out.println("si existe id");
                              } else {
                                  errorSemantico.add(String.format("Error semantico con id: %s  linea: %d  columna: %d. no existe este id.", tp.getLexema(), tp.getLine(), tp.getColumna()));
                              } RESULT = " + " + tp.getLexema() + n.toString(); :}
    | COMA APOSTROFO:tp texto_insert:e  par_insert1:n  {:RESULT = " + " +  tp.getLexema()+" " + e.toString() + n.toString(); :}
    | PAROUT:tp                     {:RESULT = tp.getLexema(); :}
    ;

texto_insert ::=  mensaje_texto:n            {:RESULT =  n.toString(); :}
    | texto_etiqueta:tp APOSTROFO:n          {:RESULT = tp.toString() + n.getLexema(); :}
    ;


texto_etiqueta ::= MEQ SPAM parm_shisp:p exp_cadenatext:n  SPAM MAQ  {:RESULT = "<spam " + p.toString()+"> " + n.toString() + "</spam>"; :}    
    | MEQ SELECTED parm_shisp:p exp_opciones:n  SELECTED MAQ  {:RESULT = "<select " + p.toString()+"> " + n.toString() + "</select>"; :} 
    | MEQ H1 parm_shisp:p exp_cadenatext:n  H1 MAQ          {:RESULT = "<h1 " + p.toString()+"> " + n.toString() + "</h1>"; :} 
    | MEQ P parm_shisp:p exp_cadenatext:n  P MAQ            {:RESULT = "<p " + p.toString()+"> " + n.toString() + "</p>"; :}    
    | MEQ BR MAQ                                            {:RESULT = "<br>"; :}
    | MEQ INPUT parm_input:p exp_cadenatext:n  INPUT MAQ    {:RESULT = "<input " + p.toString()+"> " + n.toString() + "</input>"; :}
    | MEQ IMG parm_image:p MEQ DIVISION IMG MAQ             {:RESULT = "<img " + p.toString()+"> " + "</img>"; :}
    | MEQ TEXTAREA par_areatext:p TEXTAREA MAQ              {:RESULT = "<textarea " + p.toString()+"> " + "</textarea>"; :}
    | MEQ DIV par_div:p contenido_div:n DIV MAQ             {:RESULT = "<div " + p.toString()+"> " + n.toString() + "</div>"; :}
    | MEQ BUTTON par_button:p  exp_cadenatext:n BUTTON MAQ  {:RESULT = "<button " + p.toString()+"> " + n.toString() + "</button>"; :}
    ;

texto ::= ID:tp                {:  if(tablaSimbolo.existeId(tp.getLexema(), ListTablaSimbol)) { System.out.println("si existe id");
                              } else {
                                  errorSemantico.add(String.format("Error semantico con id: %s  linea: %d  columna: %d. no existe este id.", tp.getLexema(), tp.getLine(), tp.getColumna()));
                              }RESULT = tp.getLexema(); :}
    | APOSTROFO:tp mensaje_texto:n                   {:RESULT = tp.getLexema()+" " + n.toString(); :}
    ;

mensaje_texto ::= CADENA:tp mensaje_texto:n      {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | ID:tp mensaje_texto:n                      {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | NUMENTERO:tp mensaje_texto:n               {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | NUMDECIMAL:tp mensaje_texto:n              {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | SUMA:tp mensaje_texto:n                    {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | RESTA:tp mensaje_texto:n                   {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | PRODUCTO:tp mensaje_texto:n                {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | DIVISION:tp mensaje_texto:n                {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | DOSP:tp mensaje_texto:n                    {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | COMA:tp mensaje_texto:n                    {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | IGUAL:tp mensaje_texto:n                   {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | PARIN:tp mensaje_texto:n                   {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | PAROUT:tp mensaje_texto:n                  {:RESULT = tp.getLexema()+" " + n.toString(); :}
    | APOSTROFO:tp                               {:RESULT = tp.getLexema(); :}
    ;

